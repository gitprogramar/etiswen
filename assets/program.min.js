window.onload=function(){program.menuBind();program.searchBind();/*Sitemap*/if (document.getElementById("showSiteMap") !=null){bindSiteMap();}};window.onscroll=function(ev){/*if ((window.innerHeight + window.pageYOffset) >=document.body.offsetHeight){console.log("bottom");}*/program.menuFixed();};program.post=function(url, data, callback){var xhttp=new XMLHttpRequest();xhttp.onreadystatechange=function(){if (this.readyState==4 && this.status==200){if (callback !=undefined){callback(program.json(this.responseText));}}};xhttp.open("POST", url, true);xhttp.setRequestHeader("Content-Type", "application/json");xhttp.send(JSON.stringify(data));};program.json=function(val){return val.indexOf("{") !=-1 ? JSON.parse(val.substring(val.indexOf("{"))) : val;};program.scroll=function(element){document.querySelector(element).scrollIntoView({behavior: 'smooth'});};program.getParameter=function(name, url){if (!url) url=window.location.href; name=name.replace(/[\[\]]/g, "\\$&"); var regex=new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"), results=regex.exec(url); if (!results) return null; if (!results[2]) return ''; return decodeURIComponent(results[2].replace(/\+/g, " "));};/* Search box */ program.searchBind=function(){document.getElementById("search-box").children[0].addEventListener('keyup', function(e){if (e.keyCode==13){window.location.href="/component/search/?searchword=" + this.value + "&ordering=newest&searchphrase=all";}});document.getElementById("search-box").children[1].addEventListener('click', function(e){var val=document.getElementById("search-box").children[0].value;window.location.href="/component/search/?searchword=" + val + "&ordering=newest&searchphrase=all";});};program.moduleGetAsync=function(module, position, callback){/*USAGE: program.moduleGetAsync("menu", "header-top" + program.templateId, menuLoaded); function menuLoaded(){program.moduleGetAsync("html", "footer-top" + program.templateId, footerTopCallback);}*/var xhttp=new XMLHttpRequest(); xhttp.onreadystatechange=function(){if (this.readyState==4 && this.status==200){var json=program.json(this.responseText); var pos=document.getElementById(isNaN(position.substr(position.length - 2)) ? position.substr(0, position.length - 1) : position.substr(0, position.length - 2)); /*removes last character (templateId)*/ if (json.css !=undefined) pos.innerHTML='<style>' + json.css + '</style>'; if (json.html !=undefined) pos.innerHTML +=json.html; eval(json.js); if (callback !=undefined){callback();}}}; xhttp.open("GET", "/async/module.php?type=" + module + "&position=" + position + "&menuid=" + program.menuid, true); xhttp.send();};program.addCss=function(styles){/*USAGE:var styles=[];styles.push("/assets/font-awesome.min.css");window.setTimeout(program.addCss,5000,styles);*/ var head=document.head, link, exists=false; for (var x=0; x < styles.length; x++){for (var y=0; y < document.styleSheets.length; y++){if (document.styleSheets[y].href !=null && document.styleSheets[y].href.indexOf(styles[x].substr(styles[x].lastIndexOf('/') + 1)) !=-1){exists=true; break;}}if (exists){break;}link=document.createElement('link'); link.type='text/css'; link.rel='stylesheet'; link.href=styles[x]; head.appendChild(link);}};program.addScripts=function(scripts){var head=document.head, script, exists=false; for (var x=0; x < scripts.length; x++){for (var y=0; y < document.scripts.length; y++){if (document.scripts[y].src.indexOf(scripts[x].substr(scripts[x].lastIndexOf('/') + 1)) !=-1){exists=true; break;}}if (exists){break;}script=document.createElement('script'); script.type='text/javascript'; script.src=scripts[x]; head.appendChild(script);}};